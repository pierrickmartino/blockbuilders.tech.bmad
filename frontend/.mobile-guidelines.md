# Mobile Compatibility Guidelines

## Guardrails for Responsive Design

These guidelines prevent mobile compatibility issues. All new code MUST follow these rules.

### 1. Mobile Breakpoint

- **Mobile breakpoint: 768px** (Tailwind's `md` breakpoint)
- Use `md:` prefix for desktop-only styles
- Mobile-first: write mobile styles first, then add `sm:`, `md:`, `lg:` modifiers

### 2. Responsive Layout Patterns

#### Table → Card Pattern (REQUIRED for data tables)
```tsx
{/* Desktop table */}
<div className="hidden md:block">
  <Table>...</Table>
</div>

{/* Mobile cards */}
<div className="md:hidden">
  {items.map(item => (
    <Card key={item.id}>...</Card>
  ))}
</div>
```

#### Grid → Stack Pattern
```tsx
<div className="grid grid-cols-2 gap-3 sm:flex sm:flex-wrap">
  {/* 2 columns on mobile, flex row on sm+ */}
</div>
```

### 3. Horizontal Overflow (CRITICAL)

**NEVER** allow horizontal scroll on mobile. Check:

- [ ] All buttons fit within viewport width
- [ ] Tables use card layout on mobile
- [ ] Long text wraps or truncates
- [ ] Images are responsive (`max-w-full`)
- [ ] Fixed-width elements use percentage or viewport units

### 4. Touch Targets

**Minimum touch target size: 44x44px**

```tsx
// Good
<button className="min-h-[44px] min-w-[44px] p-2">

// Bad
<button className="p-1">
```

### 5. Text Readability

**Minimum font size: 14px (0.875rem)**

```tsx
// Good
<p className="text-sm">  {/* 14px */}
<p className="text-base"> {/* 16px */}

// Bad
<p className="text-xs">   {/* 12px - too small */}
```

### 6. Testing Checklist

Before submitting code, test at these viewports:

- [ ] **375px** - iPhone SE (mobile)
- [ ] **768px** - Tablet (md breakpoint)
- [ ] **1280px** - Desktop

### 7. Common Mistakes to Avoid

❌ **Don't:**
- Use `overflow-x-auto` on main containers (causes horizontal scroll)
- Use fixed pixel widths on mobile (`w-[500px]`)
- Nest `md:hidden` inside other responsive containers
- Forget to test button visibility on small screens

✅ **Do:**
- Use Tailwind's responsive utilities (`sm:`, `md:`, `lg:`)
- Use percentage widths or `max-w-full`
- Test on real devices or browser DevTools
- Use the mobile detection hook: `useIsMobile()`

### 8. Automated Testing

Run mobile compatibility tests before committing:

```bash
npm run test:mobile
```

Tests check for:
- No horizontal scroll
- All buttons within viewport
- Proper layout switching at breakpoints
- Touch-friendly element sizes

### 9. Quick Reference

| Breakpoint | Width | Tailwind Prefix | Use Case |
|------------|-------|-----------------|----------|
| Mobile     | <768px | (default) | Primary mobile layout |
| Tablet     | 768px+ | `md:` | Tablet and desktop |
| Desktop    | 1280px+ | `lg:` | Large desktop features |

### 10. Component-Specific Rules

#### Strategies Page
- Use table on `md:` and above
- Use cards below `md:`
- Ensure "Browse Templates" and "Import" buttons don't overflow

#### Market Overview Page
- Market sentiment cards must stack vertically on mobile
- Charts must be responsive (use parent container width)
- Ensure all ticker cards fit within viewport

#### Dashboard Page
- Strategy list items must not overflow
- Metadata should stack vertically on mobile
- Action buttons (Clone, etc.) must be visible

### 11. ESLint Rules

The following ESLint rules help enforce mobile-friendly code:

- `jsx-a11y/click-events-have-key-events` - Ensure keyboard accessibility
- `jsx-a11y/no-static-element-interactions` - Use semantic elements
- `jsx-a11y/interactive-supports-focus` - Ensure focusable elements

### 12. Mobile Detection Hook

Use the `useIsMobile()` hook for JavaScript-based responsive logic:

```tsx
import { useIsMobile } from '@/hooks/use-mobile';

function MyComponent() {
  const isMobile = useIsMobile();

  return (
    <div>
      {isMobile ? <MobileView /> : <DesktopView />}
    </div>
  );
}
```

---

## Questions?

If you're unsure whether your code is mobile-friendly:

1. Run `npm run test:mobile`
2. Test manually at 375px, 768px, and 1280px widths
3. Check that no horizontal scroll appears at any viewport size
4. Verify all interactive elements are accessible with touch

**Remember: Mobile-first, responsive by default.**
